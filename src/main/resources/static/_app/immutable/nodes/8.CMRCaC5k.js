import{s as J,e as f,c as d,b as v,f as a,l as h,i as m,y as j,U as F,n as k,z as w,A as M,x as G,a as x,t as E,g as T,d as N,h as b,w as R,V as K}from"../chunks/scheduler.DCPJa09y.js";import{S as Q,i as W,b as D,e as X,t as V,g as Y,c as Z,a as ee,m as te,d as re}from"../chunks/index.OfV0S5WN.js";import{e as z}from"../chunks/each.D6YF6ztN.js";import{S as le}from"../chunks/Spinner.BMCX2ns8.js";import{p as ne}from"../chunks/stores.mBBjT8mA.js";let L="";window.location.hostname==="localhost"?L="http://localhost:8080/":L="https://callgomall.com/";async function se(o,e){try{const l=await fetch(L+"api/v1/product/lists",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({type:o})});if(l.ok){const t=await l.json();if(t.resultCode==="S-11")return t.data.products;throw new Error(`에러에러: ${t.message}`)}else throw new Error(`응답이 유효하지 않습니다. 상태 코드: ${l.status}`)}catch(l){return console.error("에러 지겹다 지겨워:",l),[]}}function B(o,e,l){const t=o.slice();return t[7]=e[l],t}function oe(o){let e,l,t;return l=new le({props:{size:8}}),{c(){e=f("div"),Z(l.$$.fragment),this.h()},l(r){e=d(r,"DIV",{class:!0});var s=v(e);ee(l.$$.fragment,s),s.forEach(a),this.h()},h(){h(e,"class","mt-10 text-center")},m(r,s){m(r,e,s),te(l,e,null),t=!0},p:k,i(r){t||(V(l.$$.fragment,r),t=!0)},o(r){D(l.$$.fragment,r),t=!1},d(r){r&&a(e),re(l)}}}function ce(o){let e;function l(s,n){return s[0].length>0?ie:ae}let t=l(o),r=t(o);return{c(){r.c(),e=w()},l(s){r.l(s),e=w()},m(s,n){r.m(s,n),m(s,e,n)},p(s,n){t===(t=l(s))&&r?r.p(s,n):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},i:k,o:k,d(s){s&&a(e),r.d(s)}}}function ae(o){let e,l='<h1 class="text-center text-4xl">죄송합니다<br/> 상품을 준비중 입니다</h1>';return{c(){e=f("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-3yta3c"&&(e.innerHTML=l),this.h()},h(){h(e,"class","mt-10 text-center")},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function ie(o){let e;function l(s,n){return s[3]().length>0?_e:ue}let r=l(o)(o);return{c(){r.c(),e=w()},l(s){r.l(s),e=w()},m(s,n){r.m(s,n),m(s,e,n)},p(s,n){r.p(s,n)},d(s){s&&a(e),r.d(s)}}}function ue(o){let e,l="죄송합니다<br/> 상품을 준비중 입니다";return{c(){e=f("h1"),e.innerHTML=l,this.h()},l(t){e=d(t,"H1",{class:!0,"data-svelte-h":!0}),M(e)!=="svelte-2sajmm"&&(e.innerHTML=l),this.h()},h(){h(e,"class","text-center text-4xl")},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function _e(o){let e,l=z(o[3]()),t=[];for(let r=0;r<l.length;r+=1)t[r]=O(B(o,l,r));return{c(){e=f("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=d(r,"DIV",{class:!0});var s=v(e);for(let n=0;n<t.length;n+=1)t[n].l(s);s.forEach(a),this.h()},h(){h(e,"class","grid-container")},m(r,s){m(r,e,s);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(r,s){if(s&12){l=z(r[3]());let n;for(n=0;n<l.length;n+=1){const _=B(r,l,n);t[n]?t[n].p(_,s):(t[n]=O(_),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(r){r&&a(e),G(t,r)}}}function fe(o){let e,l="No image available";return{c(){e=f("p"),e.textContent=l},l(t){e=d(t,"P",{"data-svelte-h":!0}),M(e)!=="svelte-181m4av"&&(e.textContent=l)},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function de(o){let e,l;return{c(){e=f("img"),this.h()},l(t){e=d(t,"IMG",{src:!0,alt:!0}),this.h()},h(){K(e.src,l=o[2](o[7].boards[0].storedFileName))||h(e,"src",l),h(e,"alt",o[7].productName)},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function O(o){let e,l,t,r,s=o[7].productName+"",n,_,c,u=me(o[7].price)+"",i,S,P,C,H;function q(g,p){return g[7].boards.length>0?de:fe}let y=q(o)(o);function A(){return o[4](o[7])}return{c(){e=f("div"),y.c(),l=x(),t=f("div"),r=f("p"),n=E(s),_=x(),c=f("p"),i=E(u),S=E(" 원"),P=x(),this.h()},l(g){e=d(g,"DIV",{class:!0});var p=v(e);y.l(p),l=T(p),t=d(p,"DIV",{class:!0});var $=v(t);r=d($,"P",{class:!0});var U=v(r);n=N(U,s),U.forEach(a),_=T($),c=d($,"P",{class:!0});var I=v(c);i=N(I,u),S=N(I," 원"),I.forEach(a),$.forEach(a),P=T(p),p.forEach(a),this.h()},h(){h(r,"class","product-name"),h(c,"class","product-price"),h(t,"class","mb-2"),h(e,"class","grid-item")},m(g,p){m(g,e,p),y.m(e,null),b(e,l),b(e,t),b(t,r),b(r,n),b(t,_),b(t,c),b(c,i),b(c,S),b(e,P),C||(H=R(e,"click",A),C=!0)},p(g,p){o=g,y.p(o,p)},d(g){g&&a(e),y.d(),C=!1,H()}}}function he(o){let e,l,t,r;const s=[ce,oe],n=[];function _(c,u){return c[1]?1:0}return l=_(o),t=n[l]=s[l](o),{c(){e=f("div"),t.c(),this.h()},l(c){e=d(c,"DIV",{class:!0});var u=v(e);t.l(u),u.forEach(a),this.h()},h(){h(e,"class","mx-auto")},m(c,u){m(c,e,u),n[l].m(e,null),r=!0},p(c,[u]){let i=l;l=_(c),l===i?n[l].p(c,u):(Y(),D(n[i],1,1,()=>{n[i]=null}),X(),t=n[l],t?t.p(c,u):(t=n[l]=s[l](c),t.c()),V(t,1),t.m(e,null))},i(c){r||(V(t),r=!0)},o(c){D(t),r=!1},d(c){c&&a(e),n[l].d()}}}let pe="";function me(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ge(o){localStorage.setItem("selectedProduct",JSON.stringify(o)),window.location.href=`/detail?id=${o.id}`}function be(o,e,l){let t;j(()=>{t=new URLSearchParams(F(ne).url.search).get("category")||category});let r=[],s=!0;const n=async()=>{let i=localStorage.getItem("accessToken");l(0,r=await se(pe,i)),l(1,s=!1)};j(()=>{n()});const _=i=>`/img/${i}`;function c(){return t==="전체"?r:r.filter(i=>i.type===t)}return[r,s,_,c,i=>ge(i)]}class Pe extends Q{constructor(e){super(),W(this,e,be,he,J,{})}}export{Pe as component};
