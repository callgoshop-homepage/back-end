import{s as A,e as f,c as d,b,f as a,l as h,i as m,y as j,U as J,n as k,z as w,A as L,x as F,a as x,t as E,g as T,d as N,h as v,w as G,V as R}from"../chunks/scheduler.DCPJa09y.js";import{S as K,i as Q,b as D,e as W,t as V,g as X,c as Y,a as Z,m as ee,d as te}from"../chunks/index.OfV0S5WN.js";import{e as z}from"../chunks/each.D6YF6ztN.js";import{S as re}from"../chunks/Spinner.BMCX2ns8.js";import{p as le}from"../chunks/stores.GQEl4S0D.js";async function ne(o,e){try{const l=await fetch("http://localhost:8080/api/v1/product/lists",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({type:o})});if(l.ok){const t=await l.json();if(t.resultCode==="S-11")return t.data.products;throw new Error(`에러에러: ${t.message}`)}else throw new Error(`응답이 유효하지 않습니다. 상태 코드: ${l.status}`)}catch(l){return console.error("에러 지겹다 지겨워:",l),[]}}function B(o,e,l){const t=o.slice();return t[8]=e[l],t}function se(o){let e,l,t;return l=new re({props:{size:8}}),{c(){e=f("div"),Y(l.$$.fragment),this.h()},l(r){e=d(r,"DIV",{class:!0});var s=b(e);Z(l.$$.fragment,s),s.forEach(a),this.h()},h(){h(e,"class","mt-10 text-center")},m(r,s){m(r,e,s),ee(l,e,null),t=!0},p:k,i(r){t||(V(l.$$.fragment,r),t=!0)},o(r){D(l.$$.fragment,r),t=!1},d(r){r&&a(e),te(l)}}}function oe(o){let e;function l(s,n){return s[0].length>0?ae:ce}let t=l(o),r=t(o);return{c(){r.c(),e=w()},l(s){r.l(s),e=w()},m(s,n){r.m(s,n),m(s,e,n)},p(s,n){t===(t=l(s))&&r?r.p(s,n):(r.d(1),r=t(s),r&&(r.c(),r.m(e.parentNode,e)))},i:k,o:k,d(s){s&&a(e),r.d(s)}}}function ce(o){let e,l='<h1 class="text-center text-4xl">죄송합니다<br/> 상품을 준비중 입니다</h1>';return{c(){e=f("div"),e.innerHTML=l,this.h()},l(t){e=d(t,"DIV",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-rwik7g"&&(e.innerHTML=l),this.h()},h(){h(e,"class","text-center mt-10")},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function ae(o){let e;function l(s,n){return s[3]().length>0?ue:ie}let r=l(o)(o);return{c(){r.c(),e=w()},l(s){r.l(s),e=w()},m(s,n){r.m(s,n),m(s,e,n)},p(s,n){r.p(s,n)},d(s){s&&a(e),r.d(s)}}}function ie(o){let e,l="죄송합니다<br/> 상품을 준비중 입니다";return{c(){e=f("h1"),e.innerHTML=l,this.h()},l(t){e=d(t,"H1",{class:!0,"data-svelte-h":!0}),L(e)!=="svelte-2sajmm"&&(e.innerHTML=l),this.h()},h(){h(e,"class","text-center text-4xl")},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function ue(o){let e,l=z(o[3]()),t=[];for(let r=0;r<l.length;r+=1)t[r]=O(B(o,l,r));return{c(){e=f("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=d(r,"DIV",{class:!0});var s=b(e);for(let n=0;n<t.length;n+=1)t[n].l(s);s.forEach(a),this.h()},h(){h(e,"class","grid-container")},m(r,s){m(r,e,s);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(r,s){if(s&12){l=z(r[3]());let n;for(n=0;n<l.length;n+=1){const _=B(r,l,n);t[n]?t[n].p(_,s):(t[n]=O(_),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=l.length}},d(r){r&&a(e),F(t,r)}}}function _e(o){let e,l="No image available";return{c(){e=f("p"),e.textContent=l},l(t){e=d(t,"P",{"data-svelte-h":!0}),L(e)!=="svelte-181m4av"&&(e.textContent=l)},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function fe(o){let e,l;return{c(){e=f("img"),this.h()},l(t){e=d(t,"IMG",{src:!0,alt:!0}),this.h()},h(){R(e.src,l=o[2](o[8].boards[0].storedFileName))||h(e,"src",l),h(e,"alt",o[8].productName)},m(t,r){m(t,e,r)},p:k,d(t){t&&a(e)}}}function O(o){let e,l,t,r,s=o[8].productName+"",n,_,c,u=pe(o[8].price)+"",i,S,P,C,M;function U(g,p){return g[8].boards.length>0?fe:_e}let y=U(o)(o);function q(){return o[4](o[8])}return{c(){e=f("div"),y.c(),l=x(),t=f("div"),r=f("p"),n=E(s),_=x(),c=f("p"),i=E(u),S=E(" 원"),P=x(),this.h()},l(g){e=d(g,"DIV",{class:!0});var p=b(e);y.l(p),l=T(p),t=d(p,"DIV",{class:!0});var $=b(t);r=d($,"P",{class:!0});var H=b(r);n=N(H,s),H.forEach(a),_=T($),c=d($,"P",{class:!0});var I=b(c);i=N(I,u),S=N(I," 원"),I.forEach(a),$.forEach(a),P=T(p),p.forEach(a),this.h()},h(){h(r,"class","product-name"),h(c,"class","product-price"),h(t,"class","mb-2"),h(e,"class","grid-item")},m(g,p){m(g,e,p),y.m(e,null),v(e,l),v(e,t),v(t,r),v(r,n),v(t,_),v(t,c),v(c,i),v(c,S),v(e,P),C||(M=G(e,"click",q),C=!0)},p(g,p){o=g,y.p(o,p)},d(g){g&&a(e),y.d(),C=!1,M()}}}function de(o){let e,l,t,r;const s=[oe,se],n=[];function _(c,u){return c[1]?1:0}return l=_(o),t=n[l]=s[l](o),{c(){e=f("div"),t.c(),this.h()},l(c){e=d(c,"DIV",{class:!0});var u=b(e);t.l(u),u.forEach(a),this.h()},h(){h(e,"class","mx-auto")},m(c,u){m(c,e,u),n[l].m(e,null),r=!0},p(c,[u]){let i=l;l=_(c),l===i?n[l].p(c,u):(X(),D(n[i],1,1,()=>{n[i]=null}),W(),t=n[l],t?t.p(c,u):(t=n[l]=s[l](c),t.c()),V(t,1),t.m(e,null))},i(c){r||(V(t),r=!0)},o(c){D(t),r=!1},d(c){c&&a(e),n[l].d()}}}let he="";function pe(o){return o.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function me(o){localStorage.setItem("selectedProduct",JSON.stringify(o)),window.location.href=`/detail?id=${o.id}`}function ge(o,e,l){let t;j(()=>{t=new URLSearchParams(J(le).url.search).get("category")});let r=[],s=!0;const n=async()=>{let i=localStorage.getItem("accessToken");l(0,r=await ne(he,i)),l(1,s=!1)};j(()=>{n()});const _=i=>`/img/${i}`;function c(){return t==="전체"?r:r.filter(i=>i.type===t)}return[r,s,_,c,i=>me(i)]}class Se extends K{constructor(e){super(),Q(this,e,ge,de,A,{})}}export{Se as component};
